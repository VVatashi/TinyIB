!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return document.getElementById(t)}function o(t){return document.querySelector(t)}function i(t){return document.querySelectorAll(t)}n.r(e);var a=function(){function t(){var t=this;this.original_src="",document.addEventListener("DOMContentLoaded",function(){return t.onLoad()})}return t.prototype.onLoad=function(){var t=this,e=r("captchaimage");e&&(this.original_src=e.src,e.addEventListener("click",function(){return t.reload()}))},t.prototype.reload=function(){var t=r("captcha");return t.value="",t.focus(),r("captchaimage").src=this.original_src+"#"+(new Date).getTime(),!1},t}(),u=function(){function t(){var t=this;document.addEventListener("DOMContentLoaded",function(){t.onLoad(),setTimeout(function(){r("de-main")&&t.onLoad()},1e3)})}return t.prototype.onLoad=function(){for(var t=this,e=i(".file-info__link, .thumbnail"),n=function(n){var r=Number(e[n].getAttribute("data-id"));e[n].addEventListener("click",function(e){return t.expandFile(e,r)})},r=0;r<e.length;++r)n(r);var o=i(".original"),a=function(e){var n=Number(o[e].getAttribute("data-id"));o[e].addEventListener("click",function(e){return t.expandFile(e,n)})};for(r=0;r<o.length;++r)a(r)},t.prototype.scrollIntoView=function(t){for(var e=window.scrollY||window.pageYOffset,n=window.innerHeight,r=0,o=t.offsetHeight,i=t;i&&"BODY"!==i.tagName;i=i.offsetParent)r+=i.offsetTop;e+n<r+o?t.scrollIntoView(!1):r<e&&t.scrollIntoView(!0)},t.prototype.expandFile=function(t,e){var n=this;if(void 0===t||void 0===t.which||1===t.which){t&&t.preventDefault();var o=r("thumbnail_wrapper_"+e),i=r("original_wrapper_"+e);if("true"!==o.getAttribute("data-expanded")){o.setAttribute("data-expanded","true");var a=r("expand_"+e);i.innerHTML=decodeURIComponent(a.textContent),i.style.visibility="hidden",setTimeout(function(){o.style.display="none",i.style.visibility="visible",i.style.display="",n.scrollIntoView(i)},100)}else{o.setAttribute("data-expanded","false"),i.style.display="none",i.innerHTML="",o.style.display="";var u=r("thumbnail_"+e);this.scrollIntoView(u)}return!1}return!0},t}(),s=function(){function t(){var t=this;document.addEventListener("DOMContentLoaded",function(){return t.onLoad()})}return t.prototype.onLoad=function(){var t=this,e={markup_quote:function(){return t.insertMarkup("\n>","\n")},markup_b:function(){return t.insertBBCode("b")},markup_i:function(){return t.insertBBCode("i")},markup_u:function(){return t.insertBBCode("u")},markup_s:function(){return t.insertBBCode("s")},markup_sup:function(){return t.insertBBCode("sup")},markup_sub:function(){return t.insertBBCode("sub")},markup_spoiler:function(){return t.insertBBCode("spoiler")},markup_code:function(){return t.insertBBCode("code")},markup_rp:function(){return t.insertBBCode("rp")}};Object.keys(e).forEach(function(t){var n=r(t);n&&n.addEventListener("click",e[t])})},t.prototype.insertMarkup=function(t,e){var n=r("message"),o=n.value,i=n.selectionStart,a=n.selectionEnd;return n.value=[o.substring(0,i),t,o.substring(i,a),e,o.substring(a)].join(""),n.focus(),n.selectionStart=i+t.length,n.selectionEnd=i+t.length+(a-i),!1},t.prototype.insertBBCode=function(t){return this.insertMarkup("["+t+"]","[/"+t+"]")},t}();function c(t,e){void 0===e&&(e=null);var n=("; "+document.cookie).split("; "+t+"=");if(2===n.length){var r=n.pop().split(";").shift();return decodeURIComponent(r)}return e}function d(t,e,n){var r=encodeURIComponent(e),o=n.toUTCString();document.cookie=t+"="+r+"; path=/; expires="+o}var l=function(){function t(){var t=this;document.addEventListener("DOMContentLoaded",function(){return t.onLoad()})}return t.prototype.onLoad=function(){var t=o('input[name="name"]');t&&(t.value=c("tinyib_name",""),t.addEventListener("change",function(){var e=new Date;e.setTime(e.getTime()+31536e6),d("tinyib_name",t.value,e)}));var e=r("newpostpassword");if(e){var n=c("tinyib_password");e.value=n;var i=r("deletepostpassword");i&&(i.value=n),e.addEventListener("change",function(){var t=new Date;t.setTime(t.getTime()+31536e6),d("tinyib_password",e.value,t)})}},t}(),f=function(){function t(){var t=this;document.addEventListener("DOMContentLoaded",function(){return t.onLoad()})}return t.prototype.onLoad=function(){var t=this,e=window.location.hash;if(e){var n=e.match(/^#q\d+$/i);if(null!==n){var r=Number(n[0].substr(2));this.quotePost(r)}}for(var o=i(".post-header__reflink"),a=function(e){var n=Number(o[e].getAttribute("data-id"));o[e].addEventListener("click",function(){return t.quotePost(n)})},u=0;u<o.length;++u)a(u)},t.prototype.quotePost=function(t){var e=r("message");return e.value=e.value+">>"+t+"\n",e.focus(),!1},t}(),p=function(){function t(){var t=this;this.styles={};for(var e=i("link[title]"),n=0;n<e.length;++n){var r=e[n],o=r.title,a=r.getAttribute("href");this.styles[o]=a,r.remove()}var u=c("tinyib_style","Futaba");this.setStyle(u),document.addEventListener("DOMContentLoaded",function(){return t.onLoad()})}return t.prototype.onLoad=function(){var t=this,e=r("style-switcher");if(e){for(var n=Object.keys(this.styles),o=0;o<n.length;++o){var i=n[o];this.styles[i];e.innerHTML+='<option class="style-switcher__option" value="'+i+'">'+i+"</option>"}e.addEventListener("change",function(){t.setStyle(e.value)})}},t.prototype.setStyle=function(t){var e=o("head");if(e){var n=o("link[data-selected]");if(n){if(n.title===t)return;n.remove()}var r=this.styles[t];e.innerHTML+='<link rel="stylesheet" type="text/css" href="'+r+'" data-selected="true" />';var i=new Date;i.setTime(i.getTime()+31536e6),d("tinyib_style",t,i)}},t}(),v={};v.Captcha=new a,v.ExpandFile=new u,v.FormMarkup=new s,v.FormSave=new l,v.QuotePost=new f,v.StyleSwitcher=new p}]);