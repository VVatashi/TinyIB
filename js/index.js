!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=luxon},function(t,e,n){"use strict";n.r(e);var r=function(){function t(){}return t.prototype.onReady=function(){},t.prototype.onPostInsert=function(t){},t}();function o(t){return document.getElementById(t)}function i(t){return document.querySelector(t)}function u(t){return document.querySelectorAll(t)}var a,c=(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(){var e=t.call(this)||this;return e.original_src="",e}return c(e,t),e.prototype.onReady=function(){var t=this,e=o("captchaimage");e&&(this.original_src=e.src,e.addEventListener("click",function(){return t.reload()}))},e.prototype.reload=function(){var t=o("captcha");return t.value="",t.focus(),o("captchaimage").src=this.original_src+"#"+(new Date).getTime(),!1},e}(r),p=n(0),f=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},d=function(t){function e(){return t.call(this)||this}return f(e,t),e.prototype.onReady=function(){for(var t=u(".post-header__datetime"),e=0;e<t.length;++e)this.correctTime(t[e])},e.prototype.onPostInsert=function(t){var e=t.querySelector(".post-header__datetime");e&&this.correctTime(e)},e.prototype.correctTime=function(t){var e=t.getAttribute("datetime");if(e){var n=l({},p.DateTime.DATETIME_FULL_WITH_SECONDS);n.timeZone=void 0,n.timeZoneName=void 0;var r=p.DateTime.fromISO(e);t.innerHTML=r.toLocaleString(n)}},e}(r),y=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t){function e(){return t.call(this)||this}return y(e,t),e.prototype.onReady=function(){var t=this;this.setupHandlers(),setTimeout(function(){var e=o("de-panel-buttons");e&&e.querySelectorAll(".de-panel-button").length>1&&t.setupHandlers()},1e3)},e.prototype.onPostInsert=function(t){var e=this;setTimeout(function(){for(var n=t.querySelectorAll(".file-info__link, .thumbnail, .original"),r=function(t){var r=Number(n[t].getAttribute("data-id"));n[t].addEventListener("click",function(t){return e.expandFile(t,r)})},o=0;o<n.length;++o)r(o)},100)},e.prototype.setupHandlers=function(){for(var t=this,e=u(".file-info__link, .thumbnail, .original"),n=function(n){var r=Number(e[n].getAttribute("data-id"));e[n].addEventListener("click",function(e){return t.expandFile(e,r)})},r=0;r<e.length;++r)n(r)},e.prototype.scrollIntoView=function(t){for(var e=window.scrollY||window.pageYOffset,n=window.innerHeight,r=0,o=t.offsetHeight,i=t;i&&"BODY"!==i.tagName;i=i.offsetParent)r+=i.offsetTop;e+n<r+o?t.scrollIntoView(!1):r<e&&t.scrollIntoView(!0)},e.prototype.expandFile=function(t,e){var n=this;if(void 0===t||void 0===t.which||1===t.which){t&&t.preventDefault();var r=o("thumbnail_wrapper_"+e),i=o("original_wrapper_"+e);if("true"!==r.getAttribute("data-expanded")){r.setAttribute("data-expanded","true");var u=o("expand_"+e);i.innerHTML=decodeURIComponent(u.textContent),i.style.visibility="hidden",setTimeout(function(){r.style.display="none",i.style.visibility="visible",i.style.display="",n.scrollIntoView(i)},100)}else{r.setAttribute("data-expanded","false"),i.style.display="none",i.innerHTML="",r.style.display="";var a=o("thumbnail_"+e);this.scrollIntoView(a)}return!1}return!0},e}(r),_=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(t){function e(){return t.call(this)||this}return _(e,t),e.prototype.onReady=function(){var t=this,e={markup_quote:function(){return t.insertMarkup("\n>","\n")},markup_b:function(){return t.insertBBCode("b")},markup_i:function(){return t.insertBBCode("i")},markup_u:function(){return t.insertBBCode("u")},markup_s:function(){return t.insertBBCode("s")},markup_sup:function(){return t.insertBBCode("sup")},markup_sub:function(){return t.insertBBCode("sub")},markup_spoiler:function(){return t.insertBBCode("spoiler")},markup_code:function(){return t.insertBBCode("code")},markup_rp:function(){return t.insertBBCode("rp")}};Object.keys(e).forEach(function(t){var n=o(t);n&&n.addEventListener("click",e[t])})},e.prototype.insertMarkup=function(t,e){var n=o("message"),r=n.value,i=n.selectionStart,u=n.selectionEnd;return n.value=[r.substring(0,i),t,r.substring(i,u),e,r.substring(u)].join(""),n.focus(),n.selectionStart=i+t.length,n.selectionEnd=i+t.length+(u-i),!1},e.prototype.insertBBCode=function(t){return this.insertMarkup("["+t+"]","[/"+t+"]")},e}(r);function m(t,e){void 0===e&&(e=null);var n=("; "+document.cookie).split("; "+t+"=");if(2===n.length){var r=n.pop().split(";").shift();return decodeURIComponent(r)}return e}function b(t,e,n){var r=encodeURIComponent(e),o=n.toUTCString();document.cookie=t+"="+r+"; path=/; expires="+o}var w=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(t){function e(){return t.call(this)||this}return w(e,t),e.prototype.onReady=function(){var t=i('input[name="name"]');t&&(t.value=m("tinyib_name",""),t.addEventListener("change",function(){var e=new Date;e.setTime(e.getTime()+31536e6),b("tinyib_name",t.value,e)}));var e=o("newpostpassword");if(e){var n=m("tinyib_password");e.value=n;var r=o("deletepostpassword");r&&(r.value=n),e.addEventListener("change",function(){var t=new Date;t.setTime(t.getTime()+31536e6),b("tinyib_password",e.value,t)})}},e}(r),O=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(t){function e(){return t.call(this)||this}return O(e,t),e.prototype.onReady=function(){var t=this,e=window.location.hash;if(e){var n=e.match(/^#q\d+$/i);if(null!==n){var r=Number(n[0].substr(2));this.quotePost(r)}}for(var o=u(".post-header__reflink"),i=function(e){var n=Number(o[e].getAttribute("data-id"));o[e].addEventListener("click",function(){return t.quotePost(n)})},a=0;a<o.length;++a)i(a)},e.prototype.quotePost=function(t){var e=o("message");return e.value=e.value+">>"+t+"\n",e.focus(),!1},e}(r),T=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(t){function e(){var e=t.call(this)||this;e.styles={};for(var n=u("link[title]"),r=0;r<n.length;++r){var o=n[r],i=o.title,a=o.getAttribute("href");e.styles[i]=a,o.remove()}var c=m("tinyib_style","Futaba");return e.setStyle(c),e}return T(e,t),e.prototype.onReady=function(){var t=this,e=o("style-switcher");if(e){for(var n=Object.keys(this.styles),r=0;r<n.length;++r){var i=n[r];this.styles[i];e.innerHTML+='<option class="style-switcher__option" value="'+i+'">'+i+"</option>"}e.addEventListener("change",function(){t.setStyle(e.value)})}},e.prototype.setStyle=function(t){var e=i("head");if(e){var n=i("link[data-selected]");if(n){if(n.title===t)return;n.remove()}var r=this.styles[t];e.innerHTML+='<link rel="stylesheet" type="text/css" href="'+r+'" data-selected="true" />';var o=new Date;o.setTime(o.getTime()+31536e6),b("tinyib_style",t,o)}},e}(r),j={};j.Captcha=new s,j.CorrectTime=new d,j.ExpandFile=new v,j.FormMarkup=new h,j.FormSave=new g,j.QuotePost=new k,j.StyleSwitcher=new P;var E=new MutationObserver(function(t){t.forEach(function(t){for(var e=function(e){var n=t.addedNodes[e];if(n.nodeType!==Node.ELEMENT_NODE)return"continue";var r=n;r.classList.contains("post")&&Object.keys(j).forEach(function(t){j[t].onPostInsert(r)})},n=0;n<t.addedNodes.length;++n)e(n)})});document.addEventListener("DOMContentLoaded",function(){E.observe(document.body,{childList:!0,subtree:!0}),Object.keys(j).forEach(function(t){j[t].onReady()})})}]);