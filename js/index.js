!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=luxon},function(t,e,n){"use strict";n.r(e);var o=function(){function t(){}return t.prototype.onReady=function(){},t.prototype.onPostInsert=function(t){},t}();function r(t){return document.getElementById(t)}function i(t){return document.querySelector(t)}function u(t){return document.querySelectorAll(t)}var a,c=(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(t){function e(){var e=t.call(this)||this;return e.original_src="",e}return c(e,t),e.prototype.onReady=function(){var t=this,e=r("captchaimage");e&&(this.original_src=e.src,e.addEventListener("click",function(){return t.reload()}))},e.prototype.reload=function(){var t=r("captcha");return t.value="",t.focus(),r("captchaimage").src=this.original_src+"#"+(new Date).getTime(),!1},e}(o),l=n(0);function p(t,e){void 0===e&&(e=null);var n=("; "+document.cookie).split("; "+t+"=");if(2===n.length){var o=n.pop().split(";").shift();return decodeURIComponent(o)}return e}function f(t,e,n){var o=encodeURIComponent(e),r=n.toUTCString();document.cookie=t+"="+o+"; path=/; expires="+r}var d=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},y=function(t){function e(){var e=t.call(this)||this;return e.settings=JSON.parse(p("tinyib_settings","{}")),e}return d(e,t),e.prototype.onReady=function(){for(var t=u(".post-header__datetime"),e=0;e<t.length;++e)this.correctTime(t[e])},e.prototype.onPostInsert=function(t){var e=t.querySelector(".post-header__datetime");e&&this.correctTime(e)},e.prototype.correctTime=function(t){var e=t.getAttribute("datetime");if(e){var n=_({},l.DateTime.DATETIME_FULL_WITH_SECONDS);n.timeZone=void 0,n.timeZoneName=void 0;var o=l.DateTime.fromISO(e);this.settings.time_locale&&"custom"===this.settings.time_locale&&this.settings.time_locale_custom_value&&(o=o.setLocale(this.settings.time_locale_custom_value)),t.innerHTML=o.toLocaleString(n)}},e}(o),v=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),h=function(t){function e(){return t.call(this)||this}return v(e,t),e.prototype.onReady=function(){var t=this;this.setupHandlers(),setTimeout(function(){var e=r("de-panel-buttons");e&&e.querySelectorAll(".de-panel-button").length>1&&t.setupHandlers()},1e3)},e.prototype.onPostInsert=function(t){var e=this;setTimeout(function(){for(var n=t.querySelectorAll(".file-info__link, .thumbnail, .original"),o=function(t){var o=Number(n[t].getAttribute("data-id"));n[t].addEventListener("click",function(t){return e.expandFile(t,o)})},r=0;r<n.length;++r)o(r)},100)},e.prototype.setupHandlers=function(){for(var t=this,e=u(".file-info__link, .thumbnail, .original"),n=function(n){var o=Number(e[n].getAttribute("data-id"));e[n].addEventListener("click",function(e){return t.expandFile(e,o)})},o=0;o<e.length;++o)n(o)},e.prototype.scrollIntoView=function(t){for(var e=window.scrollY||window.pageYOffset,n=window.innerHeight,o=0,r=t.offsetHeight,i=t;i&&"BODY"!==i.tagName;i=i.offsetParent)o+=i.offsetTop;e+n<o+r?t.scrollIntoView(!1):o<e&&t.scrollIntoView(!0)},e.prototype.expandFile=function(t,e){var n=this;if(void 0===t||void 0===t.which||1===t.which){t&&t.preventDefault();var o=r("thumbnail_wrapper_"+e),i=r("original_wrapper_"+e);if("true"!==o.getAttribute("data-expanded")){o.setAttribute("data-expanded","true");var u=r("expand_"+e);i.innerHTML=decodeURIComponent(u.textContent),i.style.visibility="hidden",setTimeout(function(){o.style.display="none",i.style.visibility="visible",i.style.display="",n.scrollIntoView(i)},100)}else{o.setAttribute("data-expanded","false"),i.style.display="none",i.innerHTML="",o.style.display="";var a=r("thumbnail_"+e);this.scrollIntoView(a)}return!1}return!0},e}(o),m=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),b=function(t){function e(){return t.call(this)||this}return m(e,t),e.prototype.onReady=function(){var t=this,e={markup_quote:function(){return t.insertMarkup("\n>","\n")},markup_b:function(){return t.insertBBCode("b")},markup_i:function(){return t.insertBBCode("i")},markup_u:function(){return t.insertBBCode("u")},markup_s:function(){return t.insertBBCode("s")},markup_sup:function(){return t.insertBBCode("sup")},markup_sub:function(){return t.insertBBCode("sub")},markup_spoiler:function(){return t.insertBBCode("spoiler")},markup_code:function(){return t.insertBBCode("code")},markup_rp:function(){return t.insertBBCode("rp")}};Object.keys(e).forEach(function(t){var n=r(t);n&&n.addEventListener("click",e[t])})},e.prototype.insertMarkup=function(t,e){var n=r("message"),o=n.value,i=n.selectionStart,u=n.selectionEnd;return n.value=[o.substring(0,i),t,o.substring(i,u),e,o.substring(u)].join(""),n.focus(),n.selectionStart=i+t.length,n.selectionEnd=i+t.length+(u-i),!1},e.prototype.insertBBCode=function(t){return this.insertMarkup("["+t+"]","[/"+t+"]")},e}(o),g=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),w=function(t){function e(){return t.call(this)||this}return g(e,t),e.prototype.onReady=function(){var t=i('input[name="name"]');t&&(t.value=p("tinyib_name",""),t.addEventListener("change",function(){var e=new Date;e.setTime(e.getTime()+31536e6),f("tinyib_name",t.value,e)}));var e=r("newpostpassword");if(e){var n=p("tinyib_password");e.value=n;var o=r("deletepostpassword");o&&(o.value=n),e.addEventListener("change",function(){var t=new Date;t.setTime(t.getTime()+31536e6),f("tinyib_password",e.value,t)})}},e}(o),O=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=function(t){function e(){return t.call(this)||this}return O(e,t),e.prototype.onReady=function(){var t=this,e=window.location.hash;if(e){var n=e.match(/^#q\d+$/i);if(null!==n){var o=Number(n[0].substr(2));this.quotePost(o)}}for(var r=u(".post-header__reflink"),i=function(e){var n=Number(r[e].getAttribute("data-id"));r[e].addEventListener("click",function(){return t.quotePost(n)})},a=0;a<r.length;++a)i(a)},e.prototype.quotePost=function(t){var e=r("message");return e.value=e.value+">>"+t+"\n",e.focus(),!1},e}(o),T=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),P=function(t){function e(){return t.call(this)||this}return T(e,t),e.prototype.onReady=function(){var t=r("settings_form");if(t){var e=r("time_locale_custom"),n=r("time_locale_custom_value"),o=r("status"),u=p("tinyib_settings");if(u){var a=JSON.parse(u);if(a.time_locale){var c=i('input[value="'+a.time_locale+'"]');c&&(c.checked=!0)}n&&a.time_locale_custom_value&&(n.value=a.time_locale_custom_value)}e&&n&&n.addEventListener("click",function(t){e.checked=!0}),t.addEventListener("submit",function(t){t.preventDefault();var e=new Date;return e.setTime(e.getTime()+31536e6),f("tinyib_settings",JSON.stringify({time_locale:i('input[name="time_locale"]:checked').value,time_locale_custom_value:n.value}),e),o&&(o.innerHTML="",setTimeout(function(){o.innerHTML="Settings saved."},300)),!1})}},e}(o),j=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),E=function(t){function e(){var e=t.call(this)||this;e.styles={};for(var n=u("link[title]"),o=0;o<n.length;++o){var r=n[o],i=r.title,a=r.getAttribute("href");e.styles[i]=a,r.remove()}var c=p("tinyib_style","Futaba");return e.setStyle(c),e}return j(e,t),e.prototype.onReady=function(){var t=this,e=r("style-switcher");if(e){for(var n=Object.keys(this.styles),o=0;o<n.length;++o){var i=n[o];this.styles[i];e.innerHTML+='<option class="style-switcher__option" value="'+i+'">'+i+"</option>"}e.addEventListener("change",function(){t.setStyle(e.value)})}},e.prototype.setStyle=function(t){var e=i("head");if(e){var n=i("link[data-selected]");if(n){if(n.title===t)return;n.remove()}var o=this.styles[t];e.innerHTML+='<link rel="stylesheet" type="text/css" href="'+o+'" data-selected="true" />';var r=new Date;r.setTime(r.getTime()+31536e6),f("tinyib_style",t,r)}},e}(o),L={};L.Captcha=new s,L.CorrectTime=new y,L.ExpandFile=new h,L.FormMarkup=new b,L.FormSave=new w,L.QuotePost=new k,L.Settings=new P,L.StyleSwitcher=new E;var S=new MutationObserver(function(t){t.forEach(function(t){for(var e=function(e){var n=t.addedNodes[e];if(n.nodeType!==Node.ELEMENT_NODE)return"continue";var o=n;o.classList.contains("post")&&Object.keys(L).forEach(function(t){L[t].onPostInsert(o)})},n=0;n<t.addedNodes.length;++n)e(n)})});document.addEventListener("DOMContentLoaded",function(){S.observe(document.body,{childList:!0,subtree:!0}),Object.keys(L).forEach(function(t){L[t].onReady()})})}]);