{% set is_thread = post['parent'] == constant('TINYIB_NEWTHREAD') %}

{% if is_embed or post['file'] %}
  <span class="post__file-info file-info filesize">
    {% if is_thread and post['file'] %}
      {{ is_embed ? 'Embed: ' : 'File: ' }}
    {% endif %}

    {% if is_embed %}
      <a class="file-info__expand" href="{{ direct_link }}"
        onclick="return expandFile(event, '{{ post['id'] }}');">
        {{ post['file_original'] }}
      </a>
      &ndash;({{ post['file_hex'] }})
    {% elseif post['file'] %}
      {{ thumblink }}
      <a class="file-info__expand" href="{{ direct_link }}" target="_blank"
        {% if expand %}onclick="return expandFile(event, '{{ post['id'] }}');"{% endif %}>
        {{ post['file'] }}
      </a>
      &ndash;({{ post['file_size_formatted'] }}

      {% if post['image_width'] > 0 and post['image_height'] > 0 %},
        {{ post['image_width'] }}x{{ post['image_height'] }}
      {% endif %}

      {% if constant('TINYIB_FILE_SHOW_ORIG_NAME') and post['file_original'] %},
        {{ post['file_original'] }}
      {% endif %})
    {% endif %}
  </span>
{% endif %}

<div id="thumbfile_{{ post['id'] }}">
  {% if post['thumb_width'] > 0 and post['thumb_height'] > 0 %}
    <a href="{{ direct_link }}" target="_blank"
      {% if expand %}onclick="return expandFile(event, '{{ post['id'] }}');" {% endif %}>
	    <img src="thumb/{{ post['thumb'] }}" alt="{{ post['id'] }}"
        class="post__thumb" id="thumbnail_{{ post['id'] }}"
        width="{{ post['thumb_width'] }}" height="{{ post['thumb_height'] }}" />
    </a>
  {% endif %}
</div>

{% if expandhtml %}
  <div id="expand_{{ post['id'] }}" style="display: none;">{{ expandhtml }}</div>
  <div id="file_{{ post['id'] }}" class="post__thumb" style="display: none;"></div>
{% endif %}
